@model Weavy.Web.Models.WelcomeModel
@{
    Layout = "~/Views/Shared/_LayoutBasic.cshtml";
    Title = "Welcome to " + Theme.Name;   
}
<div class="container">
    <div class="row justify-content-sm-center">
        <div class="col-sm-6">
            <div class="text-center mb-3">
                @Html.IconImg(48)
            </div>
            <h1 class="display-3">@Title</h1>
            @if (User.IsAuthenticated()) {
                <p>All set!</p>
            } else {
                <p>@(Model.AllowSignup ? "Sign in or create an account below." : "Sign in below")</p>
            }

            @if (User.IsAuthenticated()) {
                //TODO: what to show?
                <ul>
                    @foreach (var strip in Model.Strips) {
                        if (strip.EmbedUrls.Count > 1) {
                            <li>
                                @strip.Name
                                <ul>
                                    @foreach (var url in strip.EmbedUrls) {
                                        <li><a href="@url">@url</a></li>
                                    }
                                </ul>
                            </li>
                        } else {
                            <li><a href="@strip.EmbedHost">@strip.Name</a></li>
                        }
                    }
                </ul>
            } else {
                if (Model.AllowSignup) {

                    <p>Do you already have an account? Go ahead and sign in.</p>
                    <div class="form-buttons">
                        <a href="@Url.Action(nameof(AccountController.SignIn), new { path = Url.Action(nameof(AccountController.Welcome)) })" class="btn btn-primary btn-load waves-effect">Sign in</a>
                    </div>

                    <p>New to @Theme.Name? Sign up.</p>
                    <div class="form-buttons">
                        <a href="@Url.Action(nameof(AccountController.SignUp))" class="btn btn-secondary btn-load waves-effect">Sign up</a>
                    </div>
                } else {
                    <p>Go ahead and sign in.</p>
                    <div class="form-buttons">
                        <a href="@Url.Action(nameof(AccountController.SignIn), new { path = Url.Action(nameof(AccountController.Welcome)) })" class="btn btn-primary btn-load waves-effect d-block">Sign in</a>
                    </div>
                }
            }
        </div>
    </div>
</div>

@if (Model.OnboardingSpace != null) {
    @Html.Raw(Model.OnboardingSpace.WidgetScript(true))
}
